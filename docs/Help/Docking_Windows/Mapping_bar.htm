<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Mapping</title>
<meta name="author" content="Chris Korda">
<link rel=stylesheet href="../content.css" type="text/css">
</head>

<body>

<!--  content goes HERE  -->

<h3>Mapping</h3>

<p>This <a href="../Docking_Windows/Docking_windows.htm">docking window</a> lets you edit your <a href="../Concepts/Mappings.htm">mappings</a>. Mappings can be inserted, revised, deleted, copied, cut, pasted, and reordered via dragging. Mappings can also be sorted by left-clicking the appropriate item within the column header. To sort in descending order, press the <span class="key">Shift</span> key while left-clicking.

<p>The mappings are displayed in a <a href="../Concepts/Grid_controls.htm">grid control</a>. Each mapping consists of input and output event properties, an output range, and a target track. The input properties include the input event type (note on, control, etc.), the input MIDI channel, and the note or control number if appropriate. Input properties can be entered manually, or <a href="../Docking_Windows/Mapping_bar.htm#Learning_mappings">learned</a> from the MIDI input.

<p>The output properties start with the <a href="../Docking_Windows/Mapping_bar.htm#Output_event_types">output event type</a>, which may be either a MIDI message (note on, control, etc.) or a target property. If the output event is a MIDI message, the mapping is a translation, in which case the output MIDI channel and the note/control number are also relevant. Otherwise, the mapping targets a property, in which case the output MIDI channel is irrelevant, the output control may not matter either, and a target track may be required.

<p>To map a MIDI message to the same property in multiple tracks, create multiple mappings, one for each target track. It's easiest to do this via copy and paste: create a mapping for one of the tracks first, and when it's set up correctly, clone it as many times as needed, and finally edit the copies to target different tracks.

<p>The output range (start value and end value) allow the input MIDI data to be shifted or scaled to any integer range. If the start is bigger than the end, the control direction is reversed, in which case turning the knob up makes the value smaller.

<a name="Mapping_columns"><p><b>Mapping columns</b></a>
<p><table border=1 cellpadding=2 cellspacing=0>
<tr><td>Input Event</td><td>The type of input MIDI event being mapped; these are all MIDI channel messages.</td></tr>
<tr><td>Input Event</td><td>The MIDI channel on which to listen for the input event.</td></tr>
<tr><td>Input Control</td><td>The parameter that further specifies the input event. For Note On and Key Aftertouch events, it's the note number, for Control events it's the controller number, and for other input event types it's ignored.</td></tr>
<tr><td>Output Event</td><td>The <a href="../Docking_Windows/Mapping_bar.htm#Output_event_types">type</a> of output event that's being mapped to. For translations, these are MIDI channel messages, otherwise they're properties.</td></tr>
<tr><td>Output Channel</td><td>The MIDI channel of the output event. This is only applicable for translations.</td></tr>
<tr><td>Output Control</td><td>The parameter associated with the output event. This is only applicable for certain event types; see below.</td></tr>
<tr><td>Range Start</td><td>The starting value of the output range.</td></tr>
<tr><td>Range End</td><td>The ending value of the output range.</td></tr>
<tr><td>Track</td><td>The target track. This is only applicable when mapping to track properties.</td></tr>
</table>

<a name="Output_event_types"><p><b>Output event types</b></a>
<p><table border=1 cellpadding=2 cellspacing=0>
<tr><th colspan=4>Translations</th></tr>
<tr><th>Output Event</th><th>Output Control</th><th>Track</th><th>Comment</th></tr>
<tr><td>Note On</td><td>Note number</td><td>N/A</td><td>Output channel matters</td></tr>
<tr><td>Key Aftertouch</td><td>Note number</td><td>N/A</td><td>Output channel matters</td></tr>
<tr><td>Control</td><td>Controller number</td><td>N/A</td><td>Output channel matters</td></tr>
<tr><td>Patch</td><td>N/A</td><td>N/A</td><td>Output channel matters</td></tr>
<tr><td>Channel Aftertouch</td><td>N/A</td><td>N/A</td><td>Output channel matters</td></tr>
<tr><td>Wheel</td><td>N/A</td><td>N/A</td><td>Output channel matters</td></tr>
<tr><th colspan=4>Mappings</th></tr>
<tr><td><a href="../Views/Track_View/Track_Grid.htm#Track_Type">Type</a></td><td>N/A</td><td>Required</td><td>Enumeration</td></tr>
<tr><td><a href="../Views/Track_View/Track_Grid.htm#Track_Channel">Channel</a></td><td>N/A</td><td>Required</td><td>Zero-based, from 0 to 15</td></tr>
<tr><td><a href="../Views/Track_View/Track_Grid.htm#Track_Note">Note</a></td><td>N/A</td><td>Required</td><td>In semitones</td></tr>
<tr><td><a href="../Views/Track_View/Track_Grid.htm#Track_Length">Length</a></td><td>N/A</td><td>Required</td><td>In steps</td></tr>
<tr><td><a href="../Views/Track_View/Track_Grid.htm#Track_Quant">Quant</a></td><td>N/A</td><td>Required</td><td>In ticks</td></tr>
<tr><td><a href="../Views/Track_View/Track_Grid.htm#Track_Offset">Offset</a></td><td>N/A</td><td>Required</td><td>Signed offset in ticks</td></tr>
<tr><td><a href="../Views/Track_View/Track_Grid.htm#Track_Swing">Swing</a></td><td>N/A</td><td>Required</td><td>Signed offset in ticks</td></tr>
<tr><td><a href="../Views/Track_View/Track_Grid.htm#Track_Velocity">Velocity</a></td><td>N/A</td><td>Required</td><td>Signed offset in velocity</td></tr>
<tr><td><a href="../Views/Track_View/Track_Grid.htm#Track_Duration">Duration</a></td><td>N/A</td><td>Required</td><td>Signed offset in ticks</td></tr>
<tr><td><a href="../Views/Track_View/Track_Grid.htm#Track_Range_Type">Range Type</a></td><td>N/A</td><td>Required</td><td>Enumeration</td></tr>
<tr><td><a href="../Views/Track_View/Track_Grid.htm#Track_Range_Start">Range Start</a></td><td>N/A</td><td>Required</td><td>In semitones</td></tr>
<tr><td><a href="../Views/Track_View/Track_Mutes.htm">Mute</a></td><td>N/A</td><td>Required</td><td>Non-zero to mute track</td></tr>
<tr><td><a href="../Views/Track_View/Track_Steps.htm">Step</a></td><td>Step Index</td><td>Required</td><td>Event data is step value</td></tr>
<tr><td><a href="../Tracks/Note_tracks.htm#Tied_notes">Tie</a></td><td>Step Index</td><td>Required</td><td>Non-zero to tie step</td></tr>
<tr><td><a href="../Docking_Windows/Presets_bar.htm">Presets</a></td><td>N/A</td><td>N/A</td><td>Event data is preset index</td></tr>
<tr><td><a href="../Docking_Windows/Parts_bar.htm">Parts</a></td><td>Part Index</td><td>N/A</td><td>Non-zero to activate part</td></tr>
<tr><td><a href="../Menus/Transport/Play.htm">Play</a></td><td>N/A</td><td>N/A</td><td>Non-zero to play</td></tr>
<tr><td><a href="../Menus/Transport/Pause.htm">Pause</a></td><td>N/A</td><td>N/A</td><td>Non-zero to pause</td></tr>
<tr><td><a href="../Menus/Transport/Record.htm">Record</a></td><td>N/A</td><td>N/A</td><td>Non-zero to record</td></tr>
<tr><td><a href="../Menus/Transport/Loop.htm">Loop</a></td><td>N/A</td><td>N/A</td><td>Non-zero to loop</td></tr>
<tr><td><a href="../Properties/Tempo.htm">Tempo</a></td><td>N/A</td><td>N/A</td><td>See <a href="../Docking_Windows/Mapping_bar.htm#Tempo_mapping">tempo mapping</a></td></tr>
</table>

<a name="Learning_mappings"><p><b>Learning mappings</b></a>
<p>The application also supports <a href="../Menus/Tools/MIDI_Learn.htm">MIDI learn</a> mode, i.e. the input messages can be learned from the MIDI input device. To do this, select a mapping in the Mapping window, and then enable learn mode via <span class="cmd">Tools/MIDI Learn</span>, or via the keyboard shortcut <span class="key">Ctrl+Shift+L</span>, or via the Mapping window's <a href="../Docking_Windows/Mapping_bar.htm#Mapping_context_menu">context menu</a>. The background color of the selected mapping changes to green, indicating that this mapping will be learned. Now move the associated knob on the MIDI input device, and the mapping's input properties will snap to the appropriate values for that knob. To learn other mappings, select each mapping one at a time and move its associated knob. To learn multiple mappings at once, select them all and move the knob that you want to assign to all of them. After all mappings have been learned, disable MIDI learn mode.

<a name="Mapping_context_menu"><p><b>Context menu</b></a>
<p><table border=1 cellpadding=2 cellspacing=0>
<tr><td>Insert</td><td>Inserts a new mapping at the current position</td></tr>
<tr><td>Delete</td><td>Deletes the selected mappings</td></tr>
<tr><td>Cut</td><td>Deletes the selected mappings after copying them to the <a href="../Menus/Edit/Standard_editing_commands.htm#Clipboards">clipboard</a></td></tr>
<tr><td>Copy</td><td>Copies the selected mappings to the clipboard</td></tr>
<tr><td>Paste</td><td>Inserts the contents of the mapping clipboard at the current position</td></tr>
<tr><td>Select All</td><td>Selects all mappings</td></tr>
<tr><td>Learn</td><td>Toggles MIDI Learn mode</td></tr>
<tr><td>Map Tracks</td><td>Creates mappings for the selected <a href="../Concepts/Tracks.htm">tracks</a></td></tr>
</table>

<a name="Tempo_mapping"><p><b>Tempo mapping</b></a>
<p>Controlling <a href="../Properties/Tempo.htm">tempo</a> is a special case, because unlike other <a href="../Concepts/Mappings.htm">mapping</a> targets, tempo is exponential rather than linear. For example, suppose the normal tempo is 100, in which case half-time is 50 and double-time is 200. The values 50, 100, and 200 are clearly not linearly spaced. Tempo mapping handles this complication for you, so that your control behaves as if tempo is linear, even though it isn't. A pitch bend wheel works similarly.

<p>To specify the range of tempo change your control covers, adjust the mapping's Range Start and Range End properties. Some useful tempo mapping setups are given below.

<p><table border=1 cellpadding=2 cellspacing=0>
<tr><th>Range Start</th><th>Range End</th><th>Tempo Range</th><th>Comment</th></tr>
<tr><td>0</td><td>127</td><td>100% to 200%</td><td>Normal to double-time, the default setup</td></tr>
<tr><td>&minus;127</td><td>0</td><td>50% to 100%</td><td>Half-time to normal</td></tr>
<tr><td>&minus;127</td><td>127</td><td>50% to 200%</td><td>Half-time to double-time</td></tr>
<tr><td>&minus;63</td><td>63</td><td>71% to 141%</td><td>Approximately half the previous range, from the square root of &frac12; to the square root of 2</td></tr>
</table>

<p>During <a href="../Menus/Transport/Play.htm">playback</a>, the net tempo is shown in the <a href="../Menus/View/Status_Bar.htm">status bar</a>.

<a name="Position_mapping"><p><b>Position mapping</b></a>
<p>Position mapping lets you control the <a href="../Menus/Track/Rotate.htm">rotation</a> of one or more target tracks. Tracks don't have a rotation property, so it's necessary to use a two-stage workaround that consists of <a href="../Modulation/Position_modulation.htm">position modulation</a> and <a href="../Docking_Windows/Mapping_bar.htm#Step_mapping">step mapping</a>. You want to create a one-step position modulator track that targets the track(s) to be rotated, and then create a mapping that targets your position modulator track's one and only step. Do as follows:

<ol>
<li>Create a new track, change its <a href="../Views/Track_View/Track_Grid.htm#Track_Type">type</a> to Modulator, and change its <a href="../Views/Track_View/Track_Grid.htm#Track_Length">length</a> to one.
<li>Create a <a href="../Concepts/Modulations.htm">modulation</a> targeting the track(s) you want to rotate. Change the modulation's <a href="../Concepts/Modulations.htm#Modulation_types">type</a> to Position, and its source to the modulator track you created above.
<li>Create a new mapping, and set its input properties appropriately for your control, or <a href="../Menus/Tools/MIDI_Learn.htm">learn</a> them.
<li>Change the mapping's <a href="../Docking_Windows/Mapping_bar.htm#Output_event_types">Output Event</a> to Step, its Output Control to zero, and its Track to the modulator track you created above.
<li>You may also want to adjust the mapping's range so that the possible rotations are spread out evenly across your control's range. To do this, set the mapping's Range Start to 64, and its Range End to 64 plus the length of the track(s) being rotated. The offset of 64 is necessary because position modulation interprets steps as <a href="../Concepts/Steps.htm#Unsigned_versus_signed_steps">signed</a> values.
</ol>

<p>Rotating multiple tracks with a single control makes more sense if the target tracks are all the same length, but that's not a requirement. If the above procedure isn't working, make sure the mapping's Output Control is zero; it's specifying which step to control, and step indices are zero-based. If you show your position modulator track in the <a href="../Views/Track_View/Velocities_Pane.htm">velocities pane</a> or the <a href="../Docking_Windows/Step_Values_bar.htm">step values bar</a>, you should see its step value changing as you move your control. When in doubt, use the <a href="../Docking_Windows/MIDI_Input_bar.htm">MIDI input bar</a> to verify that you're receiving the expected MIDI message, and if not, check your <a href="../Options/MIDI/Input_Device.htm">input device</a>.

<a name="Step_mapping"><p><b>Step mapping</b></a>
<p>Step mapping means assigning a MIDI message to control the value of a step within a track. The mapping's Output Event must be Step, and its Track property must specify the target track. In a step mapping, the Output Control property is a zero-based index that specifies which step to access. The valid range of a step index is from zero to the target track's length minus one. For example, if the target track is four steps long, to access its last step, set Output Control to three. If the step index is out of range, the mapping has no effect. Because <a href="../Concepts/Steps.htm">steps</a> serve many purposes, there are many possible step mapping scenarios, only some of which are presented below.

<p><table border=1 cellpadding=2 cellspacing=0>
<tr><td><a href="../Docking_Windows/Mapping_bar.htm#Position_mapping">Position mapping</a></td><td>This is already explained above.</td></tr>
<tr><td>Mapping a single control to the same track property in many tracks</td><td>Normally you must create one mapping for each track you want to control, but this is potentially cumbersome when controlling many tracks. If the track property you want to control has a <a href="../Concepts/Modulations.htm#Modulation_types">modulation type</a> associated with it&mdash;as is the case for <a href="../Views/Track_View/Track_Grid.htm#Track_Note">note</a>, <a href="../Views/Track_View/Track_Grid.htm#Track_Offset">offset</a>, <a href="../Views/Track_View/Track_Grid.htm#Track_Velocity">velocity</a>, <a href="../Views/Track_View/Track_Grid.htm#Track_Duration">duration</a>, and <a href="../Views/Track_View/Track_Grid.htm#Track_Range_Start">range start</a>&mdash;it may be easier to modulate the target tracks with a one-step source track, and then create a single mapping that targets your source track's step. This is similar to the position mapping procedure explained above, except you'll select a different modulation type.</td></tr>
<tr><td>Independently controlling each of the step values in a track</td><td>By mapping a different control to each step of a note track, you can use a control surface to create rhythmic patterns. Your controls determine not only the pattern, but also the note velocities. To emulate the step buttons on a drum machine, use switches instead of knobs or sliders, toggling between 0 and 100 for example. To create melodies, map controls to the steps of a <a href="../Modulation/Note_modulation.htm">note</a> or <a href="../Modulation/Index_modulation.htm">index</a> modulator. You can also alter the contents of <a href="../Modulation/Scale_modulation.htm">scales</a> or <a href="../Modulation/Chord_modulation.htm">chords</a> by mapping controls to their steps. <a href="../Tracks/Controller_tracks.htm">Controller tracks</a> can also be interesting step mapping targets.</td></tr>
</table>

<a name="Tie_mapping"><p><b>Tie mapping</b></a>
<p>Within <a href="../Tracks/Note_tracks.htm">note tracks</a>, a step can be <a href="../Tracks/Note_tracks.htm#Tied_notes">tied</a>, so that it extends the preceding note instead of triggering a new note. You can assign a MIDI message to control whether a track step is tied or not. Set the mapping's Output Event to Tie, its Track property to the target track, and its Output Control to the zero-based step index. The input control should ideally be a button that toggles between zero and a non-zero value. <a href="../Docking_Windows/Mapping_bar.htm#Step_mapping">Step mapping</a> and tie mapping work together to give you complete control of a note track: use step mapping to change the note velocities, and tie mapping to merge adjacent steps into longer notes. Tie mapping is only supported for note tracks and has no effect on other track types.



<!--  content stops HERE  -->
			
</body>
</html>